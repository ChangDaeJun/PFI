# PFI
### 여러 주식 가격을 조합하여 자신만의 맞춤 지수를 만들 수 있게 해주는 웹 프로젝트입니다.

<img width="604" alt="image" src="https://user-images.githubusercontent.com/97227920/185779917-aa2259d2-fec8-4730-b673-fd153f095eb8.png">

## 목차
* [프로젝트 계획](#1-프로젝트-계획)

  * [서비스 목표](#1-1-서비스-개요-및-목표)
  
  * [사용할 기술](#1-2-사용할-기술)
  
  * [서비스 페이지](#1-3-서비스-페이지-구상)
  
  * [개발 계획](#1-4-개발-계획)
  
  * [개발 구조](#1-5-개발-구조)
  
* [프로젝트 진행 기록](#2-프로젝트-진행-기록)

## 1. 프로젝트 계획
### 1-1. 서비스 개요 및 목표
- 서비스 개요

  주식 시장에는 시장의 성장 정도를 나타내기 위해서, 특정 날을 기준으로 종합주가지수를 만듭니다.
 
  예를 들어 코스피는 1980년 100을 시작으로, 현재 2,500선이며 이는 80년에 비해 한국 주식시장이 약 25배 정도 커졌음을 알 수 있습니다.
 
  종합주가지수 외에도 주식 시장에서는 다양한 시장의 상황을 파악하고, 예측하고자 다양한 지수를 만들어 활용하게 됩니다.
 
  오늘날에는 이런 지수를 다방면에 활용하여 에너지 지수나 반도체 지수처럼 특정 산업 지수를 만들거나 혹은 주식 옵션의 변동성을 측정하여 시장의 공포성을 예측하기도 합니다.
 
  이런 지수들은 투자자가 변화하는 주식 시장의 상황을 이해하고, 올바른 판단을 하는 데 큰 역할을 할 것입니다. 
 
  하지만, 시중에 있는 지수들은 대표적인 지수일 뿐이지 정작 투자자에게는 불필요한 정보들이 섞여 있을 수 있습니다.
 
  이러한 단점을 보완하고, 투자자가 직접 쉽게 자신에게 필요한 지수를 만들 수 있다면, 투자에 있어 새로운 관점을 제시할 수 있을 것입니다.
 
  더 나아가 다양한 사람들이 다양한 지수를 만든다면, 쉽게 시장의 흐름을 예측할 수 있는 새로운 지수를 기대할 수도 있을 것입니다.

- 목표
  - 한국, 미국 시장의 상장회사 주식 가격과 코스피, 나스닥, 환율 등 주요 지표 제공
  - 나만의 지수 제작 서비스


### 1-2. 사용할 기술

이름 | 종류 | 사용 목적
---|---|---|
스프링 프레임워크 & 스프링부트 | 웹 개발 프레임워크 | 웹 프로젝트 구동 및 테스트 코드 작성
스프링 시큐리티 | 보안 프레임워크 | 웹 사용자에 대한 인증, 권한부여, 암호화
thymeleaf | 템플릿 엔진 | 웹 뷰 작성, 데이터 교환, 로그인 시 CSRF 토큰을 이용한 공격 보호
MySQL | 데이터베이스 | 유저 정보 저장
jdbcTemplate | ?? | 데이터베이스 컨트롤
jsoup | 라이브러리 | 웹에서 주식 정보 추출
구글 차트 | API | List기반의 주식 데이터를 그래프로 표현

### 1-3. 서비스 페이지 구상
<img width="553" alt="image" src="https://user-images.githubusercontent.com/97227920/185072494-eb563fd4-1c78-4b00-82e7-0f85acc07036.png">


### 1-4. 개발 계획
 1. Back-end

우선순위 | 개발 내용
---| ---|
1 | [주식 서비스 제작, 홈페이지에 그래프 노출](#주식-그래프-구현)
1 | 주식 제작 서비스, 해당 서비스 페이지 
2 | 관리자 계정 제작, 관리자 페이지 제작 
2 | 유저 정보 관리 페이지 제작, 관련 서비스 제작
2 | 유저가 만든 지수 정보 저장 서비스 
3 | 유저별 홈페이지 커스텀 기능 
3 | 주식 간 비율 비교 서비스 및 페이지
4 | 주식 전체 데이터 CSV 파일로 프로젝트에 올리기

 2. Front-end

우선순위 | 개발 내용
---| ---|
1 | 홈페이지 html, css 제작

### 1-5. 개발 구조

#### 주식 그래프 구현
#### 주식 제작 서비스 구현
#### 관리자 권한, 페이지 구현

## 2. 프로젝트 진행 기록
날짜 | 개발 내용 | 담당자
---| ---| ---|
2022년 7월 29일 | 프로젝트 파일 생성 후 깃 관리 시작, 유저 데이터베이스 연동과 유저 도메인 작성 | 장대준
2022년 7월 30일 | 유저 서비스 작성 | 장대준
2022년 7월 31일 ~ 8월 10일 | 유저 데이터 보안을 위한 방안 고민, 스프링 시큐리티 학습 및 적용 | 장대준
2022년 8월 11일 ~ 8월 12일 | 주식 도메인, 주식 데이터베이스 연동 | 장대준
2022년 8월 13일 ~ 8월 14일 | 주식 데이터 크롤링 작성, 데이터베이스에 저장. | 장대준
-----개편 이후----- | ----------개편 이후---------- | ---
[2022년 8월 17일](#2022년-8월-17일) | 계획 수정, 스프링 시큐리티 적용, User도메인 Memeber로 이름 변경 | 장대준
[2022년 8월 18일](#2022년-8월-18일) | Stock 관련 도메인, 서비스, 레포지토리 생성. 홈페이지 제작 | 장대준
[2022년 8월 20일](#2022년-8월-20일) | 프로젝트 진행 멤버 2명 추가, 프로젝트에 대한 의견 수렴 | ALL
[~ 2022년 8월 21일](#~-2022년-8월-22일) | 의견 수렴에 따른 프로젝트 계획 변경, 물리 서버 구축 | 장대준

### 2022년 8월 17일
1. 주요 변경점
 - readme 파일 생성, 프로젝트 계획 관리
 - 주식 도메인 삭제
 - 기존 User 도메인을 Member도메인으로 이름 변경(Repository, Service 포함)
 - User, SecurityUserDetails -> Member로 병합

2. 스프링 시큐리티 적용
<img width="604" alt="image" src="https://user-images.githubusercontent.com/97227920/185153128-edd1ae67-cb54-4dea-9f35-30a97a18dedd.png">
- Member에 implements UserDetails 후, 추상메서드 구현.
 <img width="400" alt="image" src="https://user-images.githubusercontent.com/97227920/185156228-06a5ebd1-d2cb-41bc-a474-571079937152.png">
- UserDetails에 implements UserDetailsService 후, 메서드 구현.
<img width="400" alt="image" src="https://user-images.githubusercontent.com/97227920/185156893-65c6e025-ce97-4da0-808f-7abcb30bdfc4.png">

### 2022년 8월 18일
1. 주요 변경점 
 - StockRepository, CrawlingStockRepository, StockService 제작
 - 홈 화면에 구글 차트 구현중(그래프 오류 해결중)
 
2. Stock 구조 계획
<img width="717" alt="Pasted Graphic" src="https://user-images.githubusercontent.com/97227920/185420684-fdddbfca-443a-48e1-a1a2-0466e278cfd5.png">

- 추후 데이터베이스 연결을 고려하여 설계 -> StockRepository 인터페이스 제작
- 1번 jsoup 라이브러리를 사용하여 www.investing.com에서 데이터 크롤링 후 StockService에 저장
- 2번 StockService는 웹서버 실행시 사전에 정해진 방법(2022-08. 현재는 크롤링)으로 데이터를 가져 온 뒤 Map에 보관.
- 3번 Model을 통해 주식 가격을 String 형태로 넘겨줌.(오류 수정 필요)

### 2022년 8월 20일
1. 프로젝트 개선 의견
 - 프로젝트 기획 변경 -> 기존 프로젝트 내 의존성과 계층구조 개선을 위한 기획 시작
 - 서버 배포를 위한 물리 서버 구축
 - 프로젝트 협업 및 깃 브랜치 관리 방법 변경 예정(PR, 코드리뷰, 새로운 브랜치 전략 등)
 - 위키 작성 활성화 예정(자료 수집 및 정리)
 - 프로젝트 https 적용 필요성 느낌

2. 개선 의견에 따른 계획 변경

기간 | 이전 계획 | 변경 계획
---|---|---|
2022년 8월 22일 ~ 2022년 8월 26일 | 주식 제작 서비스 개발 | 물리 서버 구축, 프로젝트 계층과 의존성 및 디자인 패턴 연구
2022년 8월 27일 | 신규 | 프로젝트 구조 회의

### ~ 2022년 8월 22일
1. 주요 변경점
- 물리 서버 구축(80번 포트)

2. 물리서버 구축
 - 참고 레퍼런스
   - 전체 과정 : https://afteracademy.com/blog/how-to-convert-your-laptop-desktop-into-a-server-and-host-internet-accessible-website-on-it-part-2-cdb4b3633fa9
   - 80포트, 443 포트 : https://johngrib.github.io/wiki/why-http-80-https-443/ 
   - KT 공유기 포트포워드 방법 : https://m.blog.naver.com/zetezz/221224911338
 
 - 설정 과정
   - 서버용 노트북 IP 고정
   - 서버용 노트북 IP로 80, 443 포트포워드 진행
   - 노트북 톰켓 포트 80으로 변경 후 서버 실행
